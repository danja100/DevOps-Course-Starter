language: generic
services:
- docker
env:
  global:
  - secure: "Y3lYnfZxfSjeQW33e7xCyIQ2GKPy/eBY93q4rvpoT3H0merxchUiDkvRKuBAmX4PWWd7d+CLG3HvDH2Vy7hYbcACJcMDWtAE0nAOtCWhEyqIi9F6pRXh/41RBQuNQD10wjq9exnm4WVUYfv2IujkoRv4xUa9aCgWPwWUB5fA+8jgEMBC+rxtBosugsSUxdklAFkev2Ut3XrrfkIdUUX4+N7UeWeSugLd4idbJn0zSWGSLHADYwEOvh2wPiWaVhKF6yUJVtFSJxf4OH7ebacelO2aDjxpDhyfWRfaAzy+JyyXpp3xLl5Yi3aCqQ4sJmNuWdPqYIWca9hIklthpWhRqobeRT92ioBreaKU1VRRbJKK1Z9pAMwK7a8UrJlZoglm/IiG/SyN61hwq0GCRoFbgVeJhkP/WYZjKPDxiw83rIPrhx8c67/WgP+zfTvCBPO9PL5yr78Tt35gMfZ9xLNJUwB7CxzmueeHXGBGo1BbYyGG3FlZJUvzBqt9f6iGSIbPswjsxbftdQDA8XSK7sIZWXUsfpghCQx3vYjhPxtRKGOXwf+HrKo7Ut+yVEvvyzV+uqpRzn/D7knIFMHuCzBuo8ku7O7Ooff51qM4lFx/j3OyK3WF4n13mwv/hvTk5m/a8VklRlTg70NpIYATlyXv9kKPm4WVsnMiEUqoKL96qxQ="
  - secure: "DeZdqReBrzdfutM//dQZ8BgUnwKZhhI9e705d6uvMkhnjyG/xXcB3TJtg/2X7LAYH56wKaYIIoEztwAaC3z+HR/L/SDxPlsNHvMgj0JH111/oSdMAZ8dHT2Hs1FvvV6ZvFpAHD061ZrT0G++R5oBJ2tRKE15Mfpp2w5/PRsrFpxGc0r2Vu2/FOJhCINIScEMdlbYnn+EcoPoVy2W8V0dgt7vvYmshFKf87HD3YazyawGvscJSswH4oBejTA/cqu3kY1RrtgppXAulb4hlxnUkSEpB5UCLvXP0o/2cW+pxGrNDWZYCW7i+0ctGdDMN0jvu7UJ04kuvuzTsV5Lpp8zLdAdPSeOs1MNqqxaJVnBL1iuJjoIlIROq1BeyeaHWSihG7Ew4mM9M56MXrBBFoJ+JmceWyX+RpyEqjgPRbJnjYpkGn1fPUI3ubHXsqE+wczm/ABV1aexfyRQi2Y6dvYNcOK1UurG6sV7/8RDB+edq1crYyvDjMmYO50bw2hOmZT1RehppP2kuYucMUaChrwe341uELbslwfuUEhzn0sKlggK97vS04MbpZ8mPCdErIblfM5GHB2wdn4T2mJp+E20KEoLelhii62AxXWoC577f4bpTAG1sNJNUbZDlhCpCf3jmdCCLWXy19K40FN3EtjXMJiCpykUyweWRpiGQf5qGSo="
script:
- docker build --target test --tag my-test-image .
- docker build --target production --tag danja100/todo-app:prod .
- docker push danja100/todo-app:prod
- docker run --env-file ./.env.test my-test-image
notifications:
  slack:
    secure: cyERPfkzIAzILycLJGK/Pf7sKdOiK8cemP+PfhBYmMcimfHgd4EYhC8a6I5ChY13/h/H+0Nz2iTWsB3WUBzo+t5Zcxt2+hvf9Iy37ToCWHuw7iGBnJKesppFXT+0ilDBVVgls1pdi7eI6SwZsOv9enSZPBsF4VEpNeZiTPEJXG/RLIZ0UlWfMEOrDl/1wQld1wfpD1Ny+b3uajkRoVmJ1H7zcZcYqOe+gkIk87xgghNmilPW/YifDaB11YRi4gPJe1d5AQgFRs+3amdg+RTv9hw59nhsTy1HwB/bJ8UphoH0M7W1d3ohukLwSdT4TkPoXjGoXia9SGfWWEZi5CBtfnAbVeaTDyAOMpE4/kbu3w7/TbJdImN+JuibsEuYcClTKbgTwM6Dc6YpTpQgqFZw1ZT1QmMBiojcP0Mcp7X8EnR5vpYP67HnRTfdW8nBgyv1M0Lz3Ly6/nrLsX/WxJyo++84YRIR1PH3o42MN727DY0hjds1omDFCA2IGJ//FJc/DrBXJQ0aeMTMDs3Hgt15I1K8T374CJwjAKkf+zn7f1MB/J9H69xbzemG6MVOW4iL5d67lthLdazLuD3NS4aNTp53k5qEvBkgrVNnUrfc/FqYGSluUri/zKrT0bUkJXC9QDMKd2fJjGl4gs7Z55dfPpAspfL83W2r/L6N146s/q4=
  email:
    recipients:
    - ravensmush@gmail.com
    on_failure: always
